# 開発モードでの自動更新テストガイド

## 概要
開発モードでも本番環境と同じように自動更新機能をテストできるように設定しました。

## セットアップ手順

### 1. 環境変数の設定
開発モードで更新テストを有効にするには、環境変数を設定します：

```bash
# Windows (PowerShell)
$env:ENABLE_UPDATE_TEST="true"
npm run dev

# Windows (Command Prompt)
set ENABLE_UPDATE_TEST=true
npm run dev

# macOS/Linux
ENABLE_UPDATE_TEST=true npm run dev
```

### 2. テストモードの確認
アプリが起動したら、設定画面を開いて「アップデート」セクションを確認します：
- 「現在のバージョン」の横に「(更新テストモード有効)」と表示されていればOK
- コンソールに「Development mode: Update test mode enabled」と表示されます

## テスト手順

### 1. 現在のバージョンを確認
- 設定 > アップデート で現在のバージョンを確認（例：0.1.1）

### 2. GitHubにテストリリースを作成
1. GitHubリポジトリで新しいリリースを作成
2. タグ名：現在より新しいバージョン（例：v0.1.2）
3. リリースタイトル：Test Release v0.1.2
4. リリースノート：テスト用の更新内容を記載
5. アセット：開発環境用のビルドファイルをアップロード（オプション）

### 3. 更新の確認
1. 設定 > アップデート を開く
2. 「アップデートを確認」ボタンをクリック
3. 新しいバージョンが検出されることを確認

### 4. 更新のダウンロード（テスト）
- 「ダウンロード」ボタンをクリック
- 進捗バーが表示され、ダウンロードが進行することを確認

### 5. インストール（テスト）
- ダウンロード完了後、「今すぐ再起動してインストール」ボタンが表示される
- クリックすると再起動の確認ダイアログが表示される

## 注意事項

### 開発環境での制限
- 実際のインストールは実行されません（開発ビルドのため）
- 更新の検出とダウンロードプロセスのみテスト可能

### 本番環境でのテスト
完全な自動更新フローをテストするには：
1. `npm run build` でビルド
2. `npm run package` でインストーラーを作成
3. インストーラーを使ってアプリをインストール
4. インストールされたアプリで更新を確認

### トラブルシューティング

#### 更新が検出されない場合
- GitHubのリリースが公開されているか確認
- `package.json`の`publish`設定が正しいか確認
- ネットワーク接続を確認

#### エラーが発生する場合
- コンソールログを確認
- GitHub APIのレート制限に引っかかっていないか確認
- プライベートリポジトリの場合、認証設定を確認

## デバッグ情報

### コンソールログ
開発者ツール（Ctrl+Shift+I）で以下のログを確認できます：
- `Checking for updates...` - 更新チェック開始
- `Update available: x.x.x` - 新バージョン検出
- `No updates available` - 更新なし
- `Download progress...` - ダウンロード進捗

### ネットワークタブ
開発者ツールのNetworkタブで以下を確認：
- GitHub API へのリクエスト
- リリースアセットのダウンロード

## テスト用のモックリリース作成

開発環境でのテスト用に、以下のようなリリースを作成することを推奨：

```yaml
タグ: v999.999.999
タイトル: Development Test Release
内容: This is a test release for development environment
プレリリース: はい
```

これにより、本番環境に影響を与えずにテストできます。